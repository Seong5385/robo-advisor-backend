<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>로그인</title>
</head>
<body>
<h1>로그인</h1>

<form id="loginForm">
  <input type="text" id="userId" placeholder="아이디" required /><br><br>
  <input type="password" id="password" placeholder="비밀번호" required /><br><br>

  <button type="submit">로그인</button>
</form>

<script>
  document.getElementById("loginForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const data = {
      userId: document.getElementById("userId").value,
      password: document.getElementById("password").value
    };

    const response = await fetch("/roboAdvisor/users/login", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    });

    const result = await response.json();

    if (!response.ok) {
      alert("로그인 실패: " + JSON.stringify(result));
      return;
    }

    // ApiResponses<String> 구조니까 result.data 에 토큰 있음
    localStorage.setItem("accessToken", result.data);

    alert("로그인 성공!");
    console.log("JWT:", result.data);
  });
</script>
</body>
</html>
